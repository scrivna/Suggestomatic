var suggestions=[],unchecked=[],checked=[],max_words=100,checkinterval=[],searchTerms=[],negatives=[],suggestions_negative=[],running=!1,engines={google_com:!1,google_couk:!1,google_fr:!1,google_es:!1,yahoo:!1,bing:!1,amazon:!1,ebay:!1,blekko:!1,youtube:!1};function jsonp(a){var b=document.createElement("script");b.src=a;document.getElementsByTagName("head")[0].appendChild(b)}
function filter(a){if(""==a||" "==a||-1<a.indexOf("http"))return!1;var b=a.match(/ /g);if(b&&b.length>max_words-1)return!1;var b=getNegatives(),c;for(c in b)if(-1<a.indexOf(b[c]))return!1;var b=getSearchTerms(),e=!1;for(c in b){var f=b[c].replace(/\*/,"").split(" "),d=0,g;for(g in f)-1<a.indexOf(f[g])&&d++;d==f.length&&(e=!0)}return!1===e?!1:!0}
function addNewSuggestions(a){if("object"==typeof a){for(var b in a)filter(a[b])&&-1==checked.indexOf(a[b])&&(checked.push(a[b]),suggestions.push(a[b]),unchecked.push([a[b],a[b].length+1]));for(b in a){var c=a[b].length;-1<a[b].indexOf("*")&&(c=a[b].indexOf("*")-1);var e="abcdefghijklmnopqrstuvwxyz".split(""),f;for(f in e){var d=" "+e[f],d=a[b].substr(0,c)+d+a[b].substr(c+d.length),d=d.replace(/ +/g," "),d=d.replace(/^\s+/,"");filter(d)&&-1==checked.indexOf(d)&&(checked.push(d),unchecked.push([d,
c+2]))}}}}function getSearchTerms(){0==searchTerms.length&&(searchTerms=$("#seed_keywords").val().toLowerCase().split("\n").filter(function(a){return 0<a.length}),searchTerms=arrayDedupe(searchTerms));return searchTerms}function getNegatives(){0==negatives.length&&(negatives=$("#negative_keywords").val().toLowerCase().split("\n").filter(function(a){return 0<a.length}),negatives=arrayDedupe(negatives));return negatives}
function loop(){if(!(0>=unchecked.length)){unchecked.sort(function(a,b){return a[0].length-b[0].length});var a=unchecked.shift(),b=a[1],a=a[0];engines.google_com&&setTimeout(function(){getSuggestionsGoogleWildcard(a,b,".com")},100);engines.google_couk&&setTimeout(function(){getSuggestionsGoogleWildcard(a,b,".co.uk")},100);engines.google_fr&&setTimeout(function(){getSuggestionsGoogleWildcard(a,b,".fr")},100);engines.google_es&&setTimeout(function(){getSuggestionsGoogleWildcard(a,b,".es")},100);engines.youtube&&
setTimeout(function(){getSuggestionsGoogle(a,"youtube",".com")},100);engines.yahoo&&setTimeout(function(){getSuggestionsYahoo(a)},300);engines.bing&&setTimeout(function(){getSuggestionsBing(a)},500);engines.amazon&&setTimeout(function(){getSuggestionsAmazon(a)},700);engines.ebay&&setTimeout(function(){getSuggestionsEbay(a)},900);engines.blekko&&setTimeout(function(){getSuggestionsBlekko(a)},900)}}
function start(){if(!0!==running){running=!0;var a=0;$("input[data-engine]:checked").each(function(){engines[$(this).attr("data-engine")]=!0;a++});var b=1E3*(a+1);addNewSuggestions(getSearchTerms());loop();checkinterval.push(setInterval(loop,b));checkinterval.push(setInterval(showSuggestionCounts,1E3));checkinterval.push(setInterval(showSuggestions,5E3))}}function stop(){for(var a in checkinterval)clearInterval(checkinterval[a]);running=!1;showSuggestions()}
function showSuggestionCounts(){document.title=suggestions.length+" found by Suggest-o-Matic";animateNumber("#unchecked_keywords_count",unchecked.length);animateNumber("#result_keywords_count",suggestions.length)}function showSuggestions(){$("#result_keywords").val(suggestions.sort().join("\n"))}
function animateNumber(a,b){function c(a){for(;/(\d+)(\d{3})/.test(a.toString());)a=a.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return a}var e=$(a);$({someValue:e.text().replace(",","")}).animate({someValue:b},{duration:500,easing:"swing",step:function(){e.text(c(Math.round(this.someValue)))}})}function getSuggestionsGoogleWildcard(a,b,c){a="https://www.google"+c+"/s?client=chrome-omni&gs_ri=chrome-ext&xhr=t&callback=googleCallback&cp="+b+"&q="+encodeURIComponent(a);jsonp(a)}
function getSuggestionsGoogle(a,b,c){b={youtube:{client:"youtube",ds:"yt"},books:{client:"books",ds:"bo"},products:{client:"products-cc",ds:"sh"},news:{client:"news-cc",ds:"n"},images:{client:"img",ds:"i"},web:{client:"psy",ds:""},recipes:{client:"psy",ds:"r"}}[b].ds;a="http://google"+c+"/complete/search?client=chrome&ds="+b+"&callback=googleCallback&q="+encodeURIComponent(a);jsonp(a)}
function getSuggestionsBlekko(a){jsonp("http://blekko.com/autocomplete?query="+encodeURIComponent(a)+"&callback=blekkoCallback")}function getSuggestionsAmazon(a){jsonp("http://completion.amazon.com/search/complete?search-alias=aps&mkt=1&q="+encodeURIComponent(a)+"&callback=amazonCallback")}
function getSuggestionsEbay(a){a="http://anywhere.ebay.com/services/suggest/?q="+encodeURIComponent(a);a="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22"+encodeURIComponent(a)+"%22&format=json&callback=ebayCallback";jsonp(a)}
function getSuggestionsBing(a){a="http://api.bing.com/osjson.aspx?query="+encodeURIComponent(a);a="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22"+encodeURIComponent(a)+"%22&format=json&callback=bingCallback";jsonp(a)}
function getSuggestionsYahoo(a){a="http://sugg.us.search.yahoo.net/gossip-us-ura?droprotated=0&output=sd1&nresults=100&command="+encodeURIComponent(a);a="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22"+encodeURIComponent(a)+"%22&format=json&callback=yahooCallback";jsonp(a)}function googleCallback(a){addNewSuggestions(a[1])}function amazonCallback(a){addNewSuggestions(a[1])}function blekkoCallback(a){addNewSuggestions(a.suggestions)}
function ebayCallback(a){try{"object"===typeof a.query.results.json.json[1].json?addNewSuggestions(a.query.results.json.json[1].json):addNewSuggestions([a.query.results.json.json[1].json])}catch(b){}}function bingCallback(a){try{addNewSuggestions(a.query.results.json.json[1].json)}catch(b){}}function yahooCallback(a){try{var b=a.query.results.json.r;a=[];for(var c in b)a.push(b[c].k);addNewSuggestions(a)}catch(e){}}function arrayDedupe(a){var b={},c;for(c in a)b[a[c]]=1;return Object.keys(b)}
function sortObject(a,b){var c=[],e={},f;for(f in a)c.push([f,a[f]]);c.sort(b);for(var d in c)e[c[d][0]]=c[d][1];return e}$("#stopbutton").click(function(){stop();ga("send","event","button","click","start")});$("#gogobutton").click(function(){start();ga("send","event","button","click","stop",suggestions.length);$("html, body").animate({scrollTop:$("#results").offset().top-100},300)});$("#resetbutton").click(function(){location.reload(!0)});$("#seed_keywords").focus(); 